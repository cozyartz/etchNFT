---
import CartToggle from './react/CartToggle';
import WalletConnectButton from './react/WalletConnectButton';
import ThemeToggle from './react/ThemeToggle';
import { LogoIcon, GalleryIcon, OrdersIcon, WhitepaperIcon, AboutIcon, AdminIcon, MobileMenuIcon, MobileGalleryIcon, MobileOrdersIcon, MobileWhitepaperIcon, MobileAboutIcon, MobileAdminIcon } from './react/NavIcons';
const client: 'only' = 'only';
---

<nav class="relative w-full px-6 py-4 glass-strong border-b border-primary/20 backdrop-blur-xl">
  <!-- Scan line effect -->
  <div class="absolute inset-0 scan-lines pointer-events-none"></div>
  
  <div class="relative flex justify-between items-center">
    <div class="flex items-center gap-8">
      <!-- Logo with retro styling -->
      <a href="/" class="group relative">
        <div class="flex items-center gap-2">
          <img src="/etchlogo.png" alt="EtchNFT Logo" class="w-8 h-8 animate-neon-pulse" />
          <span class="text-2xl font-cyber font-bold tracking-wider text-white">
            EtchNFT
          </span>
        </div>
      </a>
      
      <!-- Navigation Links -->
      <nav class="hidden md:flex items-center gap-1">
        <a href="/gallery" class="nav-link">
          <GalleryIcon client:only={client} />Gallery
        </a>
        <a href="/upload" class="nav-link">
          <OrdersIcon client:only={client} />Upload Art
        </a>
        <a href="/drops" class="nav-link">
          <OrdersIcon client:only={client} />Drops
        </a>
        <a href="/my-orders" class="nav-link">
          <OrdersIcon client:only={client} />My Orders
        </a>
        <a href="/whitepaper" class="nav-link">
          <WhitepaperIcon client:only={client} />White Paper
        </a>
        <a href="/about" class="nav-link">
          <AboutIcon client:only={client} />About
        </a>
        <a href="/admin/admin" class="nav-link">
          <AdminIcon client:only={client} />Admin
        </a>
      </nav>
    </div>

    <!-- Right side actions -->
    <div class="flex items-center gap-4">
      <WalletConnectButton client:only={client} />
      
      <!-- Theme toggle with retro styling -->
      <ThemeToggle client:only={client} />

      <!-- Cart Toggle with enhanced styling -->
      <CartToggle client:only={client} />
    </div>
  </div>

  <!-- Mobile menu button -->
  <button id="mobile-menu-toggle" class="md:hidden fixed top-4 right-4 z-50 p-2 rounded-lg bg-retro-dark border border-primary/30">
    <MobileMenuIcon client:only={client} />
  </button>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="fixed inset-0 z-40 bg-retro-dark/95 backdrop-blur-xl transform translate-x-full transition-transform duration-300 md:hidden">
    <div class="flex flex-col items-center justify-center h-full gap-8">
      <a href="/gallery" class="mobile-nav-link">
        <MobileGalleryIcon client:only={client} />Gallery
      </a>
      <a href="/upload" class="mobile-nav-link">
        <MobileOrdersIcon client:only={client} />Upload Art
      </a>
      <a href="/drops" class="mobile-nav-link">
        <MobileOrdersIcon client:only={client} />Drops
      </a>
      <a href="/my-orders" class="mobile-nav-link">
        <MobileOrdersIcon client:only={client} />My Orders
      </a>
      <a href="/whitepaper" class="mobile-nav-link">
        <MobileWhitepaperIcon client:only={client} />White Paper
      </a>
      <a href="/about" class="mobile-nav-link">
        <MobileAboutIcon client:only={client} />About
      </a>
      <a href="/admin/admin" class="mobile-nav-link">
        <MobileAdminIcon client:only={client} />Admin
      </a>
      
      <!-- Wallet Connection in Mobile Menu -->
      <div class="border-t border-primary/20 pt-6 mt-4">
        <div class="flex flex-col items-center gap-3">
          <p class="text-gray-400 text-sm font-cyber">Connect Wallet</p>
          <WalletConnectButton client:only={client} />
        </div>
      </div>
    </div>
  </div>
</nav>

<style>
  .nav-link {
    @apply px-4 py-2 rounded-lg text-gray-300 hover:text-white transition-all duration-300;
    @apply relative overflow-hidden;
    @apply before:absolute before:inset-0 before:bg-primary/10 before:rounded-lg;
    @apply before:scale-0 before:transition-transform before:duration-300;
    @apply hover:before:scale-100;
    @apply font-cyber text-sm tracking-wider;
  }
  
  .nav-link:hover {
    text-shadow: 0 0 10px currentColor;
  }
  
  .mobile-nav-link {
    @apply text-2xl font-cyber text-gray-300 hover:text-white transition-all duration-300;
    @apply hover:scale-110 hover:drop-shadow-[0_0_10px_rgba(255,20,147,0.5)];
    @apply tracking-wider;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuToggle?.addEventListener('click', () => {
      mobileMenu?.classList.toggle('translate-x-full');
    });
    
    // Close mobile menu when clicking on a link
    const mobileLinks = document.querySelectorAll('.mobile-nav-link');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu?.classList.add('translate-x-full');
      });
    });
    
    // Close mobile menu when clicking outside
    mobileMenu?.addEventListener('click', (e) => {
      if (e.target === mobileMenu) {
        mobileMenu.classList.add('translate-x-full');
      }
    });
  });
</script>
